{
  "unpublishedCollection": {
    "name": "formatOutput",
    "pageId": "Job Order Manager",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\tmyVar1: [],\n\tmyVar2: {},\n\tformatUserSites: () => {\n\t\tlet ret = []\n\t\tif (GetUserSites.data!= null){\n\t\t\tif(GetUserSites.data.data.getUser.hasRole.length > 0){\n\t\t\t\tfor(let i = 0; i < GetUserSites.data.data.getUser.hasRole.length; i++){\n\t\t\t\t\tfor(let j = 0; j < GetUserSites.data.data.getUser.hasRole[i].responsibilities.length; j++){\n\t\t\t\t\t\tlet line = {\n\t\t\t\t\t\t\t\"value\": GetUserSites.data.data.getUser.hasRole[i].responsibilities[j].id,\n\t\t\t\t\t\t\t\"label\": GetUserSites.data.data.getUser.hasRole[i].responsibilities[j].name\n\t\t\t\t\t\t}\n\t\t\t\t\t\tret.push(line)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn ret\n\t},\n\tformatJobOrderTable: () => {\n  let ret = [];\n  if (QueryJobOrders.data.data.queryJobOrdersWithFilter.length > 0) {\n    for (let j = 0; j < QueryJobOrders.data.data.queryJobOrdersWithFilter.length; j++) {\n      let input = QueryJobOrders.data.data.queryJobOrdersWithFilter[j];\n      let materialCode = \"\";\n      let operationsRequestCode = \"\";\n\t\t\t  let operationsRequestQuantity = 0;\n\t\t\t\t let actualProducedQuantity = 0;\n      if (input.operationsRequest != null) {\n        operationsRequestCode = input.operationsRequest.code;\n\t\t\t\t\t\toperationsRequestQuantity = input.operationsRequest.quantity;\n\t\t\t\t\t\tactualProducedQuantity = input.operationsRequest.actualProducedQuantity;\n        if (input.operationsRequest.operationsDefinition != null) {\n          if (input.operationsRequest.operationsDefinition.material != null) {\n            materialCode = input.operationsRequest.operationsDefinition.material.code;\n          }\n        }\n      }\n      let line = {\n        id: input.id,\n        name: input.name,\n        dispatchStatus: input.DispatchStatus,\n        materialCode: materialCode,\n        operationsRequestCode: operationsRequestCode,\n        JobOrderQuantity: input.quantity,\n        OperationsRequestQuantity: operationsRequestQuantity,\n        ActualProducedQuantity: actualProducedQuantity,\n      };\n      ret.push(line);\n    }\n  }\n\n  return ret;\n},\n\n\tformatPersonnelOutput: ()=>{\n\t\tlet ret = []\n\t\tif(JobResponseList.selectedItem!=null){\n\t\t\tif(JobResponseList.selectedItem.personnelActual.length > 0){\n\t\t\t\tfor(let i = 0; i < JobResponseList.selectedItem.personnelActual.length; i++){\n\t\t\t\t\tlet personnelActual = JobResponseList.selectedItem.personnelActual[i]\n\t\t\t\t\tlet uom = \"\"\n\t\t\t\t\tif(personnelActual.quantityUoM != null){\n\t\t\t\t\t\tuom = personnelActual.quantityUoM.code\n\t\t\t\t\t}\n\t\t\t\t\tlet line = {\n\t\t\t\t\t\t\"name\": personnelActual.person.name,\n\t\t\t\t\t\t\"quantity\":personnelActual.quantity,\n\t\t\t\t\t\t\"quantityUoM\":uom\n\t\t\t\t\t}\n\t\t\t\t\tret.push(line)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn ret\n\t},\n\tformatMaterialActualOutput: ()=>{\n\t\tlet ret = []\n\t\tif(JobResponseList.selectedItem!=null){\n\t\t\tif(JobResponseList.selectedItem.materialActual.length > 0){\n\t\t\t\tfor(let i = 0; i < JobResponseList.selectedItem.materialActual.length; i++){\n\t\t\t\t\tlet materialActual = JobResponseList.selectedItem.materialActual[i]\n\t\t\t\t\tlet uom = \"\"\n\t\t\t\t\tif(materialActual.quantityUoM != null){\n\t\t\t\t\t\tuom = materialActual.quantityUoM.code\n\t\t\t\t\t}\n\t\t\t\t\tlet subLot = \"\"\n\t\t\t\t\tif(materialActual.materialSubLot != null){\n\t\t\t\t\t\tsubLot = materialActual.materialSubLot.code\n\t\t\t\t\t}\n\t\t\t\t\tlet line = {\n\t\t\t\t\t\t\"name\": materialActual.materialDefinition.code,\n\t\t\t\t\t\t\"quantity\":materialActual.quantity,\n\t\t\t\t\t\t\"quantityUoM\":uom,\n\t\t\t\t\t\t\"materialUse\":materialActual.materialUse,\n\t\t\t\t\t\t\"materialSubLot\":subLot\n\t\t\t\t\t}\n\t\t\t\t\tret.push(line)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn ret\n\t},\n\tformatEquipmentActualOutput: ()=>{\n\t\tlet ret = []\n\t\tif(JobResponseList.selectedItem!=null){\n\t\t\tif(JobResponseList.selectedItem.equipmentActual.length > 0){\n\t\t\t\tfor(let i = 0; i < JobResponseList.selectedItem.equipmentActual.length; i++){\n\t\t\t\t\tlet equipmentActual = JobResponseList.selectedItem.equipmentActual[i]\n\t\t\t\t\tlet uom = \"\"\n\t\t\t\t\tif(equipmentActual.quantityUoM != null){\n\t\t\t\t\t\tuom = equipmentActual.quantityUoM.code\n\t\t\t\t\t}\n\t\t\t\t\tlet line = {\n\t\t\t\t\t\t\"name\": equipmentActual.equipment.name,\n\t\t\t\t\t\t\"quantity\":equipmentActual.quantity,\n\t\t\t\t\t\t\"quantityUoM\":uom,\n\t\t\t\t\t\t\"materialUse\":equipmentActual.materialUse\n\t\t\t\t\t}\n\t\t\t\t\tret.push(line)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn ret\n\t},\n\tformatJobOrderFilter:()=>{\n\t\tlet equipmentField = []\n\t\tif (!_.isEmpty(EquipmentTreeSelect.selectedOptionValues)){\n\t\t\t\tfor(let i = 0; i < EquipmentTreeSelect.selectedOptionValues.length; i++){\n\t\t\t\t\tlet line = {\n\t\t\t\t\t\t\"id\": EquipmentTreeSelect.selectedOptionValues[i]\n\t\t\t\t\t}\n\t\t\t\t\tequipmentField.push(line)\n\t\t\t\t}\n\t\t}\n\t\tlet statusField = []\n\t\tif (!_.isEmpty(SelectStatus.selectedOptionValues)){\n\t\t\tfor(let i = 0; i < SelectStatus.selectedOptionValues.length; i++){\n\t\t\t\tstatusField.push(SelectStatus.selectedOptionValues[i])\n\t\t\t}\n\t\t}\n\t\tlet personField = []\n\t\tif (!_.isEmpty(PersonSelect.selectedOptionValues)){\n\t\t\tfor(let i = 0; i < PersonSelect.selectedOptionValues.length; i++){\n\t\t\t\tlet line = {\n\t\t\t\t\t\"id\": PersonSelect.selectedOptionValues[i]\n\t\t\t\t}\n\t\t\t\tpersonField.push(line)\n\t\t\t}\n\t\t}\n\t\tlet operationsDefinitionField = []\n\t\tif (!_.isEmpty(OperationsDefinitionSelect.selectedOptionValue)){\n\t\t\tlet line = {\n\t\t\t\t\"id\": OperationsDefinitionSelect.selectedOptionValue\n\t\t\t}\n\t\t\toperationsDefinitionField.push(line)\n\t\t}\n\t\tlet operationsSegmentField = []\n\t\tif (!_.isEmpty(OperationsSegmentSelect.selectedOptionValues)){\n\t\t\tfor(let i = 0; i < OperationsSegmentSelect.selectedOptionValues.length; i++){\n\t\t\t\tlet line = {\n\t\t\t\t\t\"id\": OperationsSegmentSelect.selectedOptionValues[i]\n\t\t\t\t}\n\t\t\t\toperationsSegmentField.push(line)\n\t\t\t}\n\t\t}\n\t\tlet from = null\n\t\tif (FromDateTimePicker.formattedDate != \"\"){\n\t\t\tfrom = FromDateTimePicker.formattedDate\n\t\t}\n\t\tlet to = null\n\t\tif (ToDateTimePicker.formattedDate != \"\"){\n\t\t\tto = ToDateTimePicker.formattedDate\n\t\t}\n\t\tlet output = {\n\t\t\t\"equipment\": equipmentField,\n\t\t\t\"status\": statusField,\n\t\t\t\"person\":personField,\n\t\t\t\"operationsDefinition\":operationsDefinitionField,\n\t\t\t\"operationsSegment\":operationsSegmentField,\n\t\t\t\"from\":from,\n\t\t\t\"to\":to\n\t\t}\n\t\treturn output\n\t}\n}",
    "variables": [
      {
        "name": "myVar1",
        "value": []
      },
      {
        "name": "myVar2",
        "value": {}
      }
    ]
  },
  "id": "Job Order Manager_formatOutput",
  "deleted": false,
  "gitSyncId": "61db6bfa6bd5757f166cc619_624f7c22457aa64da9e02079"
}